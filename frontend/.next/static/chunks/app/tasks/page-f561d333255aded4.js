(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{76:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=a(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api"},729:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var s=a(3464),r=a(76);let o=async(e,t)=>{try{let a=await s.A.get("".concat(r.A,"/notifications/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});return console.log("API response data:",a.data),a.data}catch(e){return console.error("Error fetching notifications:",e),null}}},3053:(e,t,a)=>{Promise.resolve().then(a.bind(a,6740))},4614:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(5155),r=a(5695),o=a(6874),n=a.n(o),i=a(2115),l=a(8835),c=a(9159);function d(){let e=(0,r.useRouter)(),[t,a]=(0,i.useState)(!1),[o,d]=(0,i.useState)("");return((0,i.useEffect)(()=>{let e=(0,l.gf)();if(e){a(!0);try{let t=(0,c.s)(e);console.log("Decoded token:",t),d(t.name||t.username||"User")}catch(e){console.error("Failed to decode token",e)}}},[]),t)?(0,s.jsx)("nav",{className:"backdrop-blur-md bg-zinc-900/80 border-b border-zinc-700 shadow-md sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,s.jsx)(n(),{href:"/",className:"text-xl font-bold text-teal-400 hover:text-teal-300 transition duration-200",children:"\uD83E\uDDE9 TaskDash"}),(0,s.jsx)(n(),{href:"/",className:"text-gray-300 hover:text-white text-sm uppercase tracking-wide",children:"Dashboard"}),(0,s.jsx)(n(),{href:"/tasks/create",className:"text-gray-300 hover:text-white text-sm uppercase tracking-wide",children:"Create Task"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-300 italic",children:["\uD83D\uDC4B Welcome, ",o]}),(0,s.jsx)("button",{onClick:()=>{(0,l.L)(),e.push("/login")},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-full text-sm font-medium shadow-md transition duration-300 hover:cursor-pointer",title:"Logout",children:"Logout"})]})]})}):null}},5800:(e,t,a)=>{"use strict";a.d(t,{Fu:()=>o,UT:()=>i,a9:()=>n,lC:()=>l,vq:()=>c});var s=a(3464),r=a(76);let o=async e=>(await s.A.get("".concat(r.A,"/tasks"),{headers:{Authorization:"Bearer ".concat(e)}})).data,n=async(e,t)=>(await s.A.get("".concat(r.A,"/tasks/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}})).data,i=async(e,t)=>(await s.A.post("".concat(r.A,"/tasks"),e,{headers:{Authorization:"Bearer ".concat(t)}})).data,l=async(e,t,a)=>{let o=await s.A.put("".concat(r.A,"/tasks/").concat(e),t,{headers:{Authorization:"Bearer ".concat(a)}});if(!o.ok){let e=await o.json();console.error("Error updating task:",e);let t=Error(e.message||"Error updating task");throw t.response=o,t}return o.data},c=async(e,t)=>{let a=await s.A.delete("".concat(r.A,"/tasks/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok){let e=await a.json();console.error("Error deleting task:",e);let t=Error(e.message||"Error deleting task");throw t.response=a,t}return a.data}},6740:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(5155),r=a(2115),o=a(6874),n=a.n(o),i=a(5695),l=a(5800),c=a(8835),d=a(729),u=a(4614);function h(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[h,x]=(0,r.useState)(""),[p,g]=(0,r.useState)([]),[m,f]=(0,r.useState)([]),[b,w]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[y,k]=(0,r.useState)(""),N=(0,i.useRouter)();return((0,r.useEffect)(()=>{let e=(0,c.gf)(),a=localStorage.getItem("userId");if(!e)return;let s=async()=>{try{let a=await (0,l.Fu)(e);t(a)}catch(e){console.error("Failed to fetch tasks",e),alert("Failed to load tasks")}o(!1)};(async()=>{try{if(a){let t=await (0,d.T)(a,e);if(console.log("Notifications:",t),!t)return void toast.error("Failed to load notifications");g(t)}}catch(e){console.error("Failed to fetch notifications",e),alert("Failed to load notifications")}})(),s()},[N]),(0,r.useEffect)(()=>{let t=new Date;t.setHours(0,0,0,0),f(e.filter(e=>{let a=e.title.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase())||e.priority.toLowerCase().includes(h.toLowerCase()),s=!b||e.status===b,r=!v||e.priority===v,o=new Date(e.dueDate);o.setHours(0,0,0,0);let n=!0;return"today"===y?n=o.getTime()===t.getTime():"past"===y?n=o<t:"upcoming"===y&&(n=o>t),a&&s&&r&&n}))},[h,e,b,v,y]),a)?(0,s.jsx)("div",{className:"p-4 text-white",children:"Loading..."}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-700 text-white",children:[(0,s.jsx)(u.A,{}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-semibold text-teal-400",children:"\uD83D\uDCCB My Tasks"}),(0,s.jsx)(n(),{href:"/tasks/create",className:"bg-teal-600 hover:bg-teal-500 text-white px-6 py-3 rounded-full shadow-xl transition duration-300 ease-in-out",children:"➕ Create Task"})]}),(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:(0,s.jsx)("input",{type:"text",placeholder:"Search tasks...",value:h,onChange:e=>x(e.target.value),className:"w-2/3 bg-zinc-800 text-white border border-teal-500 rounded-lg px-6 py-3 focus:outline-none focus:ring-2 focus:ring-teal-400 shadow-lg"})}),(0,s.jsxs)("div",{className:"mb-6 flex flex-wrap justify-center gap-4",children:[(0,s.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"bg-zinc-800 text-white border border-teal-500 rounded-lg px-4 py-2 hover:cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"Start",children:"Start"}),(0,s.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,s.jsx)("option",{value:"Completed",children:"Completed"})]}),(0,s.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"bg-zinc-800 text-white border border-teal-500 rounded-lg px-4 py-2 hover:cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"All Priority"}),(0,s.jsx)("option",{value:"High",children:"High"}),(0,s.jsx)("option",{value:"Medium",children:"Medium"}),(0,s.jsx)("option",{value:"Low",children:"Low"})]}),(0,s.jsxs)("select",{value:y,onChange:e=>k(e.target.value),className:"bg-zinc-800 text-white border border-teal-500 rounded-lg px-4 py-2 hover:cursor-pointer",children:[(0,s.jsx)("option",{value:"",children:"Any Due Date"}),(0,s.jsx)("option",{value:"today",children:"Due Today"}),(0,s.jsx)("option",{value:"past",children:"Past Due"}),(0,s.jsx)("option",{value:"upcoming",children:"Upcoming"})]})]}),0===m.length?(0,s.jsx)("p",{className:"text-center text-gray-400",children:"No tasks found."}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(e=>(0,s.jsxs)("div",{onClick:()=>N.push("/tasks/".concat(e._id)),className:"bg-zinc-800/70 backdrop-blur-lg rounded-2xl p-6 shadow-lg border border-zinc-700 hover:shadow-zinc-600 transition-shadow hover:cursor-pointer duration-300",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-teal-300 truncate w-4/5",children:e.title}),(0,s.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-semibold uppercase ".concat("High"===e.priority?"bg-red-600":"Low"===e.priority?"bg-green-600":"bg-yellow-600"," text-white"),children:e.priority})]}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-4 line-clamp-3",children:e.description}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-400",children:[(0,s.jsxs)("span",{className:"w-1/3 truncate",children:["\uD83D\uDCC5 Created: ",new Date(e.createdAt).toLocaleDateString()]}),(0,s.jsxs)("span",{className:"w-1/3 truncate",children:["\uD83D\uDCC5 Due: ",new Date(e.dueDate).toLocaleDateString()]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("Start"===e.status?"bg-yellow-400 text-gray-800":"In Progress"===e.status?"bg-blue-400 text-gray-800":"bg-green-400 text-gray-800"),children:e.status})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n(),{href:"/tasks/edit/".concat(e._id),className:"text-teal-400 hover:underline hover:text-teal-300 font-semibold",onClick:e=>e.stopPropagation(),children:"✏️ Edit"})})]},e._id))})]}),p.length>0&&(0,s.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-xl p-4 mt-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-teal-400 mb-4",children:"\uD83D\uDD14 Notifications"}),(0,s.jsx)("ul",{className:"space-y-3",children:p.map((e,t)=>(0,s.jsxs)("li",{className:"bg-zinc-900 p-3 rounded-lg border border-zinc-700",children:[(0,s.jsx)("p",{className:"text-white",children:e.message}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:new Date(e.date).toLocaleString()})]},t))})]})]})}},8835:(e,t,a)=>{"use strict";a.d(t,{L:()=>o,f7:()=>s,gf:()=>r});let s=e=>localStorage.setItem("token",e),r=()=>localStorage.getItem("token"),o=()=>localStorage.removeItem("token")},9159:(e,t,a)=>{"use strict";a.d(t,{s:()=>r});class s extends Error{}function r(e,t){let a;if("string"!=typeof e)throw new s("Invalid token specified: must be a string");t||(t={});let r=+(!0!==t.header),o=e.split(".")[r];if("string"!=typeof o)throw new s(`Invalid token specified: missing part #${r+1}`);try{a=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var a;return a=t,decodeURIComponent(atob(a).replace(/(.)/g,(e,t)=>{let a=t.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}catch(e){return atob(t)}}(o)}catch(e){throw new s(`Invalid token specified: invalid base64 for part #${r+1} (${e.message})`)}try{return JSON.parse(a)}catch(e){throw new s(`Invalid token specified: invalid json for part #${r+1} (${e.message})`)}}s.prototype.name="InvalidTokenError"}},e=>{var t=t=>e(e.s=t);e.O(0,[794,874,441,684,358],()=>t(3053)),_N_E=e.O()}]);